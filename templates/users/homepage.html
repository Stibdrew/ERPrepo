{% extends 'users/base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/main.css' %}">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">  <!-- Include Bootstrap -->

<div class="container" style="display: flex;">
    <div class="side-nav" style="background-color: #222; width: 20%; height: 100vh; padding: 20px; color: white;">
        <h3 style="color: white; margin-bottom: 30px;">WEB-BASED</h3>
        <a href="{% url 'inventory' %}" style="display: block; color: white; margin-bottom: 15px;">Inventory</a>
        <a href="{% url 'view_requested_products' %}" style="display: block; color: white; margin-bottom: 15px;">My Requested Products</a>
        <a href="{% url 'homepage' %}" style="display: block; color: white; margin-bottom: 15px;">Credit Memo</a>




        <!-- Links to admin functionalities -->
        {% if user.is_superuser %}
                            <a href="{% url 'show_all_users' %}" style="display: block; color: white; margin-bottom: 15px;">Show All Users</a>
                    <a href="{% url 'admin_page' %}" style="display: block; color: white; margin-bottom: 15px;">Request Records</a>
                    <a href="{% url 'all_messages' %}" style="display: block; color: white; margin-bottom: 15px;">All Messages</a>


            <a href="{% url 'add_product' %}" style="display: block; color: white; margin-bottom: 15px;">Add Product</a>
            <a href="{% url 'all_product_requests' %}" style="display: block; color: white; margin-bottom: 15px;">All Product Requests</a>
        {% endif %}
    </div>

    <!-- Main Content Area -->
    <div class="main-content" style="width: 80%; padding: 50px;">
        <h1 style="font-size: 3em; font-weight: bold;">Complete Web-based ERP</h1>
        <h2 style="font-size: 2em; margin-top: 10px;">Experience Everything</h2>
        <p style="font-size: 1.2em; margin-top: 20px;">Our web-based ERP solution offers comprehensive tools for Inventory, Production, Sales, Purchasing, Accounting, Payroll, and Collaboration. Join thousands of businesses who trust us to streamline their operations and boost productivity.</p>

        <!-- Button to Approved Requests -->
        {% if approved_requests_count > 0 %}
    <button class="btn btn-primary btn-lg" style="margin-bottom: 20px; background-color: #007bff; border: none; border-radius: 5px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); transition: background-color 0.3s, transform 0.3s;"
            onmouseover="this.style.backgroundColor='#0056b3'; this.style.transform='scale(1.05)';"
            onmouseout="this.style.backgroundColor='#007bff'; this.style.transform='scale(1)';"
            onclick="location.href='{% url 'requested_inventory' %}'">
        Show Products
    </button>
{% endif %}


        <h2>My Access</h2>
        <ul class="list-group mb-3"> <!-- Use Bootstrap list group -->
            {% for request in requests %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <strong class="mr-3">{{ request.item }}</strong>
                        <span class="text-muted mr-3">{{ request.created_at|date:"Y-m-d H:i:s" }}</span>

                        {% if request.status == "inventory_pending" %}
                            <span class="badge badge-warning">{{ request.status }}</span>  <!-- Display status as yellow for pending -->
                        {% elif request.status == "inventory_approved" %}
                            <span class="badge badge-success">{{ request.status }}</span>  <!-- Display status as green for approved -->
                        {% elif request.status == "inventory_declined" %}
                            <span class="badge badge-danger">{{ request.status }}</span>  <!-- Display status as red for declined -->
                        {% endif %}

                    </div>

                    <!-- Add a form to delete the request -->

                </li>
            {% empty %}
                <li class="list-group-item">No requests submitted.</li>
            {% endfor %}
        </ul>
        <p><strong>Request count:</strong> {{ requests.count }}</p> <!-- This line will help you check if requests are being passed -->
    </div>
</div>
{% endblock %}